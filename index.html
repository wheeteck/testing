<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic University Certificate Generator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Crimson+Text:ital,wght@0,400;1,400&display=swap');
        
        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 1200px;
            width: 100%;
        }

        h1 {
            color: white;
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            color: #e2e8f0;
            text-align: center;
            font-style: italic;
            margin-bottom: 30px;
        }

        .form-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .form-title {
            color: #2d3748;
            font-family: 'Playfair Display', serif;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            color: #4a5568;
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 14px;
        }

        input, select {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Crimson Text', serif;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Playfair Display', serif;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .canvas-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            text-align: center;
        }

        canvas {
            max-width: 100%;
            border: 3px solid #e2e8f0;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .template-preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .template-option {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .template-option:hover {
            border-color: #667eea;
            background: #f7fafc;
        }

        .template-option.active {
            border-color: #667eea;
            background: #edf2f7;
        }

        .preview-text {
            font-size: 12px;
            color: #4a5568;
            margin-top: 5px;
        }

        .status {
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }

        .status.show {
            display: block;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ“ Classic University Certificate</h1>
        <p class="subtitle">Create prestigious academic certificates with authentic university styling</p>

        <div class="form-section">
            <div class="form-title">Certificate Details</div>
            
            <div class="template-preview">
                <div class="template-option active" data-template="harvard">
                    <strong>Harvard Style</strong>
                    <div class="preview-text">Crimson & Gold â€¢ Traditional</div>
                </div>
                <div class="template-option" data-template="oxford">
                    <strong>Oxford Style</strong>
                    <div class="preview-text">Navy & Gold â€¢ Classical</div>
                </div>
                <div class="template-option" data-template="cambridge">
                    <strong>Cambridge Style</strong>
                    <div class="preview-text">Blue & Silver â€¢ Elegant</div>
                </div>
                <div class="template-option" data-template="yale">
                    <strong>Yale Style</strong>
                    <div class="preview-text">Blue & White â€¢ Distinguished</div>
                </div>
            </div>

            <div class="form-grid">
                <div class="form-group">
                    <label for="universityName">University Name</label>
                    <input type="text" id="universityName" value="Harvard University" placeholder="Enter university name">
                </div>
                
                <div class="form-group">
                    <label for="degreeType">Degree Type</label>
                    <select id="degreeType">
                        <option value="Bachelor of Arts">Bachelor of Arts</option>
                        <option value="Bachelor of Science">Bachelor of Science</option>
                        <option value="Master of Arts">Master of Arts</option>
                        <option value="Master of Science">Master of Science</option>
                        <option value="Doctor of Philosophy">Doctor of Philosophy</option>
                        <option value="Certificate of Completion">Certificate of Completion</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="recipientName">Recipient Name</label>
                    <input type="text" id="recipientName" value="Alexandra Elizabeth Johnson" placeholder="Full name of recipient">
                </div>

                <div class="form-group">
                    <label for="fieldOfStudy">Field of Study</label>
                    <input type="text" id="fieldOfStudy" value="Computer Science" placeholder="Major or field">
                </div>

                <div class="form-group">
                    <label for="graduationDate">Graduation Date</label>
                    <input type="text" id="graduationDate" value="May 15, 2024" placeholder="Month Day, Year">
                </div>

                <div class="form-group">
                    <label for="honors">Honors (Optional)</label>
                    <select id="honors">
                        <option value="">No Honors</option>
                        <option value="Cum Laude">Cum Laude</option>
                        <option value="Magna Cum Laude">Magna Cum Laude</option>
                        <option value="Summa Cum Laude">Summa Cum Laude</option>
                        <option value="With Distinction">With Distinction</option>
                    </select>
                </div>
            </div>

            <div class="button-group">
                <button class="btn-primary" id="generateBtn">Generate Certificate</button>
                <button class="btn-secondary" id="downloadBtn">Download PNG</button>
                <button class="btn-success" id="printBtn">Print/PDF</button>
            </div>

            <div class="status" id="status"></div>
        </div>

        <div class="canvas-container">
            <canvas id="certificateCanvas" width="1200" height="800"></canvas>
        </div>
    </div>

    <script>
        // Global variables
        let currentTemplate = 'harvard';
        let canvas, ctx;
        let fontsLoaded = false;

        const templates = {
            harvard: {
                primaryColor: '#A41E22',
                secondaryColor: '#FFD700',
                accentColor: '#8B0000',
                bgColor: '#FFF8F0',
                borderColor: '#A41E22'
            },
            oxford: {
                primaryColor: '#002147',
                secondaryColor: '#FFD700',
                accentColor: '#1B365D',
                bgColor: '#F8F9FA',
                borderColor: '#002147'
            },
            cambridge: {
                primaryColor: '#003B71',
                secondaryColor: '#C0C0C0',
                accentColor: '#0056A0',
                bgColor: '#F0F8FF',
                borderColor: '#003B71'
            },
            yale: {
                primaryColor: '#00356B',
                secondaryColor: '#FFFFFF',
                accentColor: '#286DC0',
                bgColor: '#F5F5F5',
                borderColor: '#00356B'
            }
        };

        const universityNames = {
            harvard: 'Harvard University',
            oxford: 'University of Oxford',
            cambridge: 'University of Cambridge',
            yale: 'Yale University'
        };

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            console.log('Initializing certificate generator...');
            
            // Get canvas and context
            canvas = document.getElementById('certificateCanvas');
            if (!canvas) {
                showStatus('Canvas element not found!', 'error');
                return;
            }
            
            ctx = canvas.getContext('2d');
            if (!ctx) {
                showStatus('Canvas context not available!', 'error');
                return;
            }

            // Wait for fonts to load
            waitForFonts().then(() => {
                fontsLoaded = true;
                showStatus('Fonts loaded successfully!', 'success');
                generateCertificate();
            }).catch(() => {
                // Generate anyway with fallback fonts
                fontsLoaded = false;
                showStatus('Using fallback fonts', 'error');
                generateCertificate();
            });

            // Set up event listeners
            setupEventListeners();
            
            showStatus('Application initialized', 'success');
        }

        function waitForFonts() {
            return new Promise((resolve, reject) => {
                if (document.fonts && document.fonts.ready) {
                    document.fonts.ready.then(resolve).catch(reject);
                } else {
                    // Fallback: wait 2 seconds for fonts to load
                    setTimeout(resolve, 2000);
                }
            });
        }

        function setupEventListeners() {
            // Template selection
            document.querySelectorAll('.template-option').forEach(option => {
                option.addEventListener('click', function() {
                    selectTemplate(this.dataset.template);
                });
            });

            // Buttons
            document.getElementById('generateBtn').addEventListener('click', generateCertificate);
            document.getElementById('downloadBtn').addEventListener('click', downloadCertificate);
            document.getElementById('printBtn').addEventListener('click', printCertificate);

            // Auto-generate on input change
            document.querySelectorAll('input, select').forEach(input => {
                input.addEventListener('change', generateCertificate);
                input.addEventListener('input', debounce(generateCertificate, 500));
            });
        }

        function selectTemplate(templateName) {
            if (!templates[templateName]) return;
            
            currentTemplate = templateName;
            
            // Update active template visual
            document.querySelectorAll('.template-option').forEach(el => el.classList.remove('active'));
            document.querySelector(`[data-template="${templateName}"]`).classList.add('active');
            
            // Update university name
            document.getElementById('universityName').value = universityNames[templateName];
            
            generateCertificate();
        }

        function generateCertificate() {
            if (!canvas || !ctx) {
                showStatus('Canvas not ready', 'error');
                return;
            }

            try {
                showStatus('Generating certificate...', 'success');
                
                const template = templates[currentTemplate];
                
                // Get form data
                const universityName = document.getElementById('universityName').value || 'University Name';
                const degreeType = document.getElementById('degreeType').value;
                const recipientName = document.getElementById('recipientName').value || 'Student Name';
                const fieldOfStudy = document.getElementById('fieldOfStudy').value || 'Field of Study';
                const graduationDate = document.getElementById('graduationDate').value || 'Date';
                const honors = document.getElementById('honors').value;

                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Background
                ctx.fillStyle = template.bgColor;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Ornate border
                drawOrnateBorder(ctx, template);

                // University seal/emblem area
                drawUniversitySeal(ctx, template, universityName);

                // Main title
                ctx.fillStyle = template.primaryColor;
                ctx.font = fontsLoaded ? 'bold 72px "Playfair Display", serif' : 'bold 72px serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(universityName.toUpperCase(), canvas.width / 2, 180);

                // Decorative line
                ctx.strokeStyle = template.secondaryColor;
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(200, 220);
                ctx.lineTo(canvas.width - 200, 220);
                ctx.stroke();

                // Certificate type
                ctx.fillStyle = template.accentColor;
                ctx.font = fontsLoaded ? '36px "Crimson Text", serif' : '36px serif';
                ctx.fillText('CERTIFIES THAT', canvas.width / 2, 280);

                // Recipient name (most prominent)
                ctx.fillStyle = template.primaryColor;
                ctx.font = fontsLoaded ? 'italic bold 56px "Playfair Display", serif' : 'italic bold 56px serif';
                ctx.fillText(recipientName, canvas.width / 2, 360);

                // Honors (if any)
                let yOffset = 0;
                if (honors) {
                    ctx.fillStyle = template.secondaryColor;
                    ctx.font = fontsLoaded ? 'bold 28px "Crimson Text", serif' : 'bold 28px serif';
                    ctx.fillText(honors, canvas.width / 2, 400);
                    yOffset = 40;
                }

                // Degree conferment text
                ctx.fillStyle = template.accentColor;
                ctx.font = fontsLoaded ? '32px "Crimson Text", serif' : '32px serif';
                ctx.fillText('has fulfilled the requirements for the degree of', canvas.width / 2, 430 + yOffset);

                // Degree type
                ctx.fillStyle = template.primaryColor;
                ctx.font = fontsLoaded ? 'bold 42px "Playfair Display", serif' : 'bold 42px serif';
                ctx.fillText(degreeType.toUpperCase(), canvas.width / 2, 490 + yOffset);

                // Field of study
                ctx.fillStyle = template.accentColor;
                ctx.font = fontsLoaded ? '36px "Crimson Text", serif' : '36px serif';
                ctx.fillText(`in ${fieldOfStudy}`, canvas.width / 2, 540 + yOffset);

                // Date and signatures area
                const baseY = 620 + yOffset;
                
                // Date
                ctx.fillStyle = template.primaryColor;
                ctx.font = fontsLoaded ? '24px "Crimson Text", serif' : '24px serif';
                ctx.textAlign = 'left';
                ctx.fillText(`Given this ${graduationDate}`, 150, baseY);

                // Signature lines and labels
                drawSignatureArea(ctx, template, baseY);

                // Official seal
                drawOfficialSeal(ctx, template, 150, baseY + 20);

                // Latin motto (decorative)
                ctx.fillStyle = template.accentColor;
                ctx.font = fontsLoaded ? 'italic 20px "Crimson Text", serif' : 'italic 20px serif';
                ctx.textAlign = 'center';
                ctx.fillText('Veritas â€¢ Scientia â€¢ Virtus', canvas.width / 2, canvas.height - 40);

                showStatus('Certificate generated successfully!', 'success');
                
            } catch (error) {
                console.error('Error generating certificate:', error);
                showStatus('Error generating certificate: ' + error.message, 'error');
            }
        }

        function drawOrnateBorder(ctx, template) {
            const margin = 30;
            const innerMargin = 60;
            
            // Outer border
            ctx.strokeStyle = template.borderColor;
            ctx.lineWidth = 8;
            ctx.strokeRect(margin, margin, canvas.width - 2 * margin, canvas.height - 2 * margin);
            
            // Inner decorative border
            ctx.strokeStyle = template.secondaryColor;
            ctx.lineWidth = 4;
            ctx.strokeRect(innerMargin, innerMargin, canvas.width - 2 * innerMargin, canvas.height - 2 * innerMargin);
            
            // Corner decorations
            drawCornerDecoration(ctx, template, innerMargin + 20, innerMargin + 20);
            drawCornerDecoration(ctx, template, canvas.width - innerMargin - 20, innerMargin + 20);
            drawCornerDecoration(ctx, template, innerMargin + 20, canvas.height - innerMargin - 20);
            drawCornerDecoration(ctx, template, canvas.width - innerMargin - 20, canvas.height - innerMargin - 20);
        }

        function drawCornerDecoration(ctx, template, x, y) {
            ctx.fillStyle = template.secondaryColor;
            ctx.save();
            ctx.translate(x, y);
            
            // Draw ornate corner design
            ctx.beginPath();
            ctx.arc(0, 0, 12, 0, Math.PI * 2);
            ctx.fill();
            
            // Decorative radiating lines
            ctx.strokeStyle = template.secondaryColor;
            ctx.lineWidth = 2;
            for (let i = 0; i < 8; i++) {
                const angle = (i * Math.PI) / 4;
                ctx.beginPath();
                ctx.moveTo(Math.cos(angle) * 15, Math.sin(angle) * 15);
                ctx.lineTo(Math.cos(angle) * 25, Math.sin(angle) * 25);
                ctx.stroke();
            }
            
            ctx.restore();
        }

        function drawUniversitySeal(ctx, template, universityName) {
            const centerX = canvas.width / 2;
            const centerY = 120;
            const radius = 40;
            
            // Shield background
            ctx.fillStyle = template.primaryColor;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.fill();
            
            // Shield border
            ctx.strokeStyle = template.secondaryColor;
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // University initial or symbol
            ctx.fillStyle = template.secondaryColor;
            ctx.font = fontsLoaded ? 'bold 36px "Playfair Display", serif' : 'bold 36px serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            const initial = universityName.charAt(0);
            ctx.fillText(initial, centerX, centerY);
        }

        function drawSignatureArea(ctx, template, baseY) {
            // President signature line
            ctx.strokeStyle = template.borderColor;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(600, baseY + 40);
            ctx.lineTo(850, baseY + 40);
            ctx.stroke();
            
            ctx.fillStyle = template.accentColor;
            ctx.font = fontsLoaded ? '18px "Crimson Text", serif' : '18px serif';
            ctx.textAlign = 'center';
            ctx.fillText('President', 725, baseY + 60);

            // Dean signature line
            ctx.beginPath();
            ctx.moveTo(900, baseY + 40);
            ctx.lineTo(1150, baseY + 40);
            ctx.stroke();
            
            ctx.fillText('Dean', 1025, baseY + 60);
        }

        function drawOfficialSeal(ctx, template, x, y) {
            const radius = 35;
            
            // Seal background
            ctx.fillStyle = template.primaryColor;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
            
            // Seal border
            ctx.strokeStyle = template.secondaryColor;
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // Seal text
            ctx.fillStyle = template.secondaryColor;
            ctx.font = fontsLoaded ? 'bold 12px "Crimson Text", serif' : 'bold 12px serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('OFFICIAL', x, y - 8);
            ctx.fillText('SEAL', x, y + 8);
        }

        function downloadCertificate() {
            if (!canvas) {
                showStatus('Canvas not available for download', 'error');
                return;
            }

            try {
                const recipientName = document.getElementById('recipientName').value || 'Certificate';
                const fileName = `${recipientName.replace(/\s+/g, '_')}_Certificate.png`;
                
                const link = document.createElement('a');
                link.download = fileName;
                link.href = canvas.toDataURL('image/png', 1.0);
                link.click();
                
                showStatus('Certificate downloaded successfully!', 'success');
            } catch (error) {
                console.error('Download error:', error);
                showStatus('Error downloading certificate', 'error');
            }
        }

        function printCertificate() {
            if (!canvas) {
                showStatus('Canvas not available for printing', 'error');
                return;
            }

            try {
                const imgData = canvas.toDataURL('image/png', 1.0);
                const printWindow = window.open('', '', 'width=1200,height=800');
                
                printWindow.document.write(`
                    <html>
                    <head>
                        <title>Certificate</title>
                        <style>
                            body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
                            img { max-width: 100%; max-height: 100%; }
                        </style>
                    </head>
                    <body>
                        <img src="${imgData}" alt="Certificate">
                    </body>
                    </html>
                `);
                
                printWindow.document.close();
                printWindow.onload = function() {
                    printWindow.print();
                };
                
                showStatus('Opening print dialog...', 'success');
            } catch (error) {
                console.error('Print error:', error);
                showStatus('Error preparing certificate for printing', 'error');
            }
        }

        function showStatus(message, type) {
            const statusEl = document.getElementById('status');
            if (statusEl) {
                statusEl.textContent = message;
                statusEl.className = `status show ${type}`;
                
                // Auto-hide success messages
                if (type === 'success') {
                    setTimeout(() => {
                        statusEl.classList.remove('show');
                    }, 3000);
                }
            }
            console.log(`Status (${type}): ${message}`);
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>
